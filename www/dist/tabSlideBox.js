"use strict";function SimplePubSub(){var e={};return{on:function(t,n){return t.split(" ").forEach(function(t){e[t]||(e[t]=[]),e[t].push(n)}),this},trigger:function(t,n){return angular.forEach(e[t],function(e){e.call(null,n)}),this}}}angular.module("tabSlideBox",[]).directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,n,i){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}]).directive("tabSlideBox",["$timeout","$window","$ionicSlideBoxDelegate","$ionicScrollDelegate",function($timeout,$window,$ionicSlideBoxDelegate,$ionicScrollDelegate){return{restrict:"A, E, C",link:function(e,t,n,i){function o(){var e=angular.element(a.querySelector(".tsb-icons")),t=e.find("a"),n=e[0].querySelector(".tsb-ic-wrp");t.length,n.querySelector(".scroll");angular.forEach(t,function(e,t){var n=angular.element(e);n.on("click",function(){s.slide(t)}),n.attr("icon-off")&&n.attr("class",n.attr("icon-off"))});var i=0;0==i&&r(0),$timeout(function(){s.slide(i)},0)}function r(e){var t=angular.element(a.querySelector(".tsb-icons")),n=t.find("a"),i=t[0].querySelector(".tsb-ic-wrp"),o=(n.length,i.querySelector(".scroll")),r=t[0].offsetWidth/2,l=angular.element(n[e]),c=angular.element(t[0].querySelector(".active"));if(l&&l.length){var s=l[0].offsetWidth,d=l[0].offsetLeft;c.attr("icon-off")?c.attr("class",c.attr("icon-off")):c.removeClass("active"),l.attr("icon-on")&&l.attr("class",l.attr("icon-on")),l.addClass("active");var f=r-d-s/2+5;if(o){var g=i.offsetWidth,$=30,v=100,h=40;($+g<d+s+h||$>d-v)&&(f>0&&(f=0),u.scrollTo(Math.abs(f),0,!0))}else{var f=r-d-s/2+5+"px";i.style.webkitTransform="translate3d("+f+",0,0)"}}}var a=t[0],l=t;l.addClass("tabbed-slidebox"),"bottom"===n.tabsPosition&&l.addClass("btm");var c=a.querySelector(".slider").getAttribute("delegate-handle"),s=$ionicSlideBoxDelegate;c&&(s=s.$getByHandle(c));var u=$ionicScrollDelegate;c&&(u=u.$getByHandle(c));var d=e.events;d.on("slideChange",function(e){r(e.index)}),d.on("ngRepeatFinished",function(e){o()})},controller:["$scope","$attrs","$element",function($scope,$attrs,$element){$scope.events=new SimplePubSub,$scope.slideHasChanged=function(index){$scope.events.trigger("slideChange",{index:index}),$timeout(function(){$scope.onSlideMove&&$scope.onSlideMove({index:eval(index)})},100)},$scope.$on("ngRepeatFinished",function(e){$scope.events.trigger("ngRepeatFinished",{event:e})})}]}}]);